{"ast":null,"code":"import _classCallCheck from \"/Users/zhoushixiong/zsx_work/FangAllOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zhoushixiong/zsx_work/FangAllOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/zhoushixiong/zsx_work/FangAllOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zhoushixiong/zsx_work/FangAllOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/zhoushixiong/zsx_work/FangAllOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nvar _dec,\n    _dec2,\n    _class,\n    _jsxFileName = \"/Users/zhoushixiong/zsx_work/FangAllOne/src/components/withMobx/UserProfileDropDown.tsx\";\n\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport { withStyles, createStyles } from '@material-ui/core/styles';\nimport { withRouter } from 'react-router';\nimport { observer, inject } from 'mobx-react';\nvar styles = createStyles(function (_ref) {\n  var spacing = _ref.spacing;\n  return {\n    root: {\n      display: 'inline',\n      color: 'white'\n    },\n    paper: {\n      color: 'white',\n      marginRight: spacing.unit * 2\n    }\n  };\n});\nvar UserProfileDropDown = (_dec = inject('msg'), _dec2 = inject('currentUser'), _dec(_class = _dec2(_class = observer(_class =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(UserProfileDropDown, _React$Component);\n\n  function UserProfileDropDown() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UserProfileDropDown);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UserProfileDropDown)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.anchorEl = void 0;\n    _this.state = {\n      open: false\n    };\n\n    _this.handleToggle = function () {\n      _this.setState(function (state) {\n        return {\n          open: !_this.state.open\n        };\n      });\n    };\n\n    _this.handleClose = function (event, action) {\n      if (_this.anchorEl.contains(event.target)) {\n        return;\n      }\n\n      switch (action) {\n        case \"personal\":\n          _this.setState({\n            open: false\n          });\n\n          _this.props.history.push('/personal');\n\n          break;\n\n        case \"logout\":\n          _this.props.msg.show('正在登出');\n\n          _this.setState({\n            open: false\n          });\n\n          _this.props.currentUser.logOut();\n\n          _this.props.msg.show('您已经登出');\n\n          _this.props.history.push('/login');\n\n          break;\n\n        default:\n          _this.setState({\n            open: false\n          });\n\n          break;\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(UserProfileDropDown, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      var open = this.state.open;\n      return React.createElement(\"div\", {\n        className: classes.root,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(Button, {\n        buttonRef: function buttonRef(node) {\n          _this2.anchorEl = node;\n        },\n        \"aria-owns\": open ? 'menu-list-grow' : undefined,\n        \"aria-haspopup\": \"true\",\n        onClick: this.handleToggle,\n        style: {\n          color: \"white\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"HALO,\\xA0\", this.props.currentUser.username), React.createElement(Popper, {\n        open: open,\n        anchorEl: this.anchorEl,\n        transition: true,\n        disablePortal: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, function (_ref2) {\n        var TransitionProps = _ref2.TransitionProps,\n            placement = _ref2.placement;\n        return React.createElement(Grow, Object.assign({}, TransitionProps, {\n          id: \"menu-list-grow\",\n          timeout: \"auto\",\n          style: {\n            transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }), React.createElement(Paper, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(ClickAwayListener, {\n          onClickAway: function onClickAway(e) {\n            return _this2.handleClose(e, 'personal');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(MenuList, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, React.createElement(MenuItem, {\n          onClick: function onClick(e) {\n            return _this2.handleClose(e, 'personal');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, \"\\u4E2A\\u4EBA\\u4E2D\\u5FC3\"), React.createElement(MenuItem, {\n          onClick: function onClick(e) {\n            return _this2.handleClose(e, 'logout');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, \"\\u767B\\u51FA\")))));\n      }));\n    }\n  }]);\n\n  return UserProfileDropDown;\n}(React.Component)) || _class) || _class) || _class);\nexport default withRouter(withStyles(styles)(UserProfileDropDown));","map":{"version":3,"sources":["/Users/zhoushixiong/zsx_work/FangAllOne/src/components/withMobx/UserProfileDropDown.tsx"],"names":["React","Button","ClickAwayListener","Grow","Paper","Popper","MenuItem","MenuList","withStyles","createStyles","withRouter","observer","inject","styles","spacing","root","display","color","paper","marginRight","unit","UserProfileDropDown","anchorEl","state","open","handleToggle","setState","handleClose","event","action","contains","target","props","history","push","msg","show","currentUser","logOut","classes","node","undefined","username","TransitionProps","placement","transformOrigin","e","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport { withStyles, createStyles } from '@material-ui/core/styles';\nimport { withRouter } from 'react-router';\nimport { observer, inject } from 'mobx-react';\n\nconst styles =  createStyles(({ spacing }:any) => ({\n  root: {\n    display: 'inline',\n    color: 'white',\n\n  },\n  paper: {\n    color: 'white',\n    marginRight: spacing.unit * 2,\n  },\n}));\n\n\ninterface IUserProfileDropDownProps{\n    classes: any,\n    history: any,\n    currentUser: any,\n    msg: any,\n\n}\n\ninterface IUserProfileDropDownState{\n    open: boolean,\n\n}\n\n@inject('msg')\n@inject('currentUser')\n@observer\nclass UserProfileDropDown extends React.Component<IUserProfileDropDownProps, IUserProfileDropDownState> {\n\n    private anchorEl:any;\n  state = {\n    open: false,\n  };\n\n  handleToggle = () => {\n\n    this.setState(state => ({ open: !this.state.open }));\n  };\n\n  handleClose = (event:any, action:string) => {\n    if (this.anchorEl.contains(event.target)) {\n      return;\n    }\n    switch (action) {\n\n      case \"personal\":\n        this.setState({ open: false });\n        this.props.history.push('/personal');\n        break;\n\n      case \"logout\":\n        this.props.msg.show('正在登出');\n        this.setState({ open: false });\n        this.props.currentUser.logOut();\n        this.props.msg.show('您已经登出');\n        this.props.history.push('/login');\n        break;\n    \n      default:\n        this.setState({ open: false });\n        break;\n    }\n\n    \n  };\n\n  render() {\n    const { classes } = this.props;\n    const { open } = this.state;\n\n    return (\n      <div className={classes.root}>\n          <Button\n            buttonRef={node => {\n              this.anchorEl = node;\n            }}\n            aria-owns={open ? 'menu-list-grow' : undefined}\n            aria-haspopup=\"true\"\n            onClick={this.handleToggle}\n            style={{\n              color: \"white\"\n            }}\n          >\n           HALO,&nbsp;{this.props.currentUser.username}\n          </Button>\n          <Popper open={open} anchorEl={this.anchorEl} transition disablePortal>\n            {({ TransitionProps, placement }:any) => (\n              <Grow\n                {...TransitionProps}\n                id=\"menu-list-grow\"\n                timeout='auto'\n                style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\n              >\n                <Paper>\n                  <ClickAwayListener onClickAway={(e:any)=>this.handleClose(e, 'personal')}>\n                    <MenuList>\n                      <MenuItem onClick={(e:any)=>this.handleClose(e, 'personal')}>个人中心</MenuItem>\n                      <MenuItem onClick={(e:any)=>this.handleClose(e, 'logout')}>登出</MenuItem>\n                    </MenuList>\n                  </ClickAwayListener>\n                </Paper>\n              </Grow>\n            )}\n          </Popper>\n      </div>\n    );\n  }\n}\n\n\n\nexport default withRouter(withStyles(styles)(UserProfileDropDown) as any);"]},"metadata":{},"sourceType":"module"}