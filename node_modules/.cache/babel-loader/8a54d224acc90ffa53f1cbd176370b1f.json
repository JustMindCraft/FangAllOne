{"ast":null,"code":"import _classCallCheck from \"/Users/zhoushixiong/zsx_work/FangAllOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zhoushixiong/zsx_work/FangAllOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/zhoushixiong/zsx_work/FangAllOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zhoushixiong/zsx_work/FangAllOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/zhoushixiong/zsx_work/FangAllOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nvar _jsxFileName = \"/Users/zhoushixiong/zsx_work/FangAllOne/src/App.tsx\",\n    _dec,\n    _dec2,\n    _dec3,\n    _class;\n\nimport React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from \"react-router-dom\";\nimport Home from './components/pages/home';\nimport NotFound from './components/pages/notFound';\nimport Dashboard from './components/pages/dashboard';\nimport Register from './components/pages/register';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport login from './components/pages/login';\nimport { inject, observer } from 'mobx-react';\nimport UserAdmin from './components/pages/dashboard/users';\nimport HomeBanner from './components/pages/dashboard/banner';\nimport Personal from './components/pages/personal';\nimport SettingPage from './components/pages/dashboard/setting';\n\nfunction LoadApp() {\n  return React.createElement(\"div\", {\n    style: {\n      width: '100%',\n      display: 'flex',\n      justifyContent: 'center',\n      justifyItems: 'center',\n      alignItems: \"center\",\n      height: '100%',\n      flexDirection: 'column'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, React.createElement(LinearProgress, {\n    variant: \"query\",\n    style: {\n      width: \"200px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, \"\\u5E94\\u7528\\u8F7D\\u5165\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u540E\")), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(LinearProgress, {\n    color: \"secondary\",\n    variant: \"query\",\n    style: {\n      width: \"200px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  })));\n}\n\nvar PrivateRoute =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PrivateRoute, _Component);\n\n  function PrivateRoute() {\n    _classCallCheck(this, PrivateRoute);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(PrivateRoute).apply(this, arguments));\n  }\n\n  _createClass(PrivateRoute, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          msg = _this$props.msg,\n          auth = _this$props.auth;\n\n      if (!auth) {\n        msg.show(\"请先登录\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          auth = _this$props2.auth,\n          exact = _this$props2.exact,\n          path = _this$props2.path,\n          component = _this$props2.component;\n\n      if (auth) {\n        return React.createElement(Route, {\n          auth: auth,\n          exact: exact,\n          path: path,\n          component: component,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(Redirect, {\n          to: \"/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return PrivateRoute;\n}(Component);\n\nvar App = (_dec = inject('msg'), _dec2 = inject('currentUser'), _dec3 = inject('app'), _dec(_class = _dec2(_class = _dec3(_class = observer(_class =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(App, _Component2);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.timer = void 0;\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props3 = this.props,\n          app = _this$props3.app,\n          currentUser = _this$props3.currentUser;\n      app.getAppInfo();\n    }\n  }, {\n    key: \"componentWillUpdate\",\n    value: function componentWillUpdate() {\n      var currentUser = this.props.currentUser;\n      clearInterval(this.timer);\n\n      if (currentUser.isLogined) {\n        this.timer = setInterval(function () {\n          currentUser.checkLogined();\n        }, 1500);\n      }\n\n      if (!currentUser.isLogined) {\n        clearInterval(this.timer);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          currentUser = _this$props4.currentUser,\n          msg = _this$props4.msg,\n          app = _this$props4.app;\n      var auth = false;\n\n      if (currentUser.isLogined) {\n        //auth要在此重新定义，这样render才能重新渲染，这样PrivateRoute才能执行\n        auth = true;\n      }\n\n      if (app.loading) {\n        return React.createElement(LoadApp, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        style: {\n          height: \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        component: Home,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), React.createElement(PrivateRoute, {\n        msg: msg,\n        auth: auth,\n        exact: true,\n        path: \"/dashboard\",\n        component: Dashboard,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), React.createElement(PrivateRoute, {\n        msg: msg,\n        auth: auth,\n        exact: true,\n        path: \"/dashboard/users\",\n        component: UserAdmin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(PrivateRoute, {\n        msg: msg,\n        auth: auth,\n        exact: true,\n        path: \"/dashboard/banner\",\n        component: HomeBanner,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }), React.createElement(PrivateRoute, {\n        msg: msg,\n        auth: auth,\n        exact: true,\n        path: \"/dashboard/settings\",\n        component: SettingPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/register\",\n        component: Register,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(PrivateRoute, {\n        msg: msg,\n        auth: auth,\n        exact: true,\n        path: \"/personal\",\n        component: Personal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/login\",\n        component: login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(Route, {\n        component: NotFound,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component)) || _class) || _class) || _class) || _class);\nexport default App;","map":{"version":3,"sources":["/Users/zhoushixiong/zsx_work/FangAllOne/src/App.tsx"],"names":["React","Component","BrowserRouter","Router","Route","Switch","Redirect","Home","NotFound","Dashboard","Register","LinearProgress","login","inject","observer","UserAdmin","HomeBanner","Personal","SettingPage","LoadApp","width","display","justifyContent","justifyItems","alignItems","height","flexDirection","PrivateRoute","props","msg","auth","show","exact","path","component","App","timer","app","currentUser","getAppInfo","clearInterval","isLogined","setInterval","checkLogined","loading"],"mappings":"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","sourcesContent":["import React, { Component} from 'react';\nimport { BrowserRouter as Router, Route, Switch, Redirect} from \"react-router-dom\";\nimport { IAppProps, IAppState } from './interfaces/components';\nimport Home from './components/pages/home';\nimport NotFound from './components/pages/notFound';\nimport Dashboard from './components/pages/dashboard';\nimport Register from './components/pages/register';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport login from './components/pages/login';\nimport { inject, observer } from 'mobx-react';\nimport UserAdmin from './components/pages/dashboard/users';\nimport HomeBanner from './components/pages/dashboard/banner'\nimport Personal from './components/pages/personal';\nimport SettingPage from './components/pages/dashboard/setting';\n\n\ninterface IPrivateRouteProps {\n  msg:any, auth:boolean, exact:boolean, path:any,\n  component: any,\n}\n\n\nfunction LoadApp() {\n  return (\n    <div style={{\n      width: '100%',\n      display: 'flex',\n      justifyContent: 'center',\n      justifyItems: 'center',\n      alignItems:\"center\",\n      height: '100%',\n      flexDirection: 'column'\n    }}>\n      <div>\n        <LinearProgress variant=\"query\" style={{width: \"200px\"}} />\n      </div>\n      <div>\n        <h4>应用载入中，请稍后</h4>\n      </div>\n      <div>\n        <LinearProgress color=\"secondary\" variant=\"query\"  style={{width: \"200px\"}} />\n      </div>\n      \n    </div>\n  );\n}\n\nclass PrivateRoute extends Component<IPrivateRouteProps> {\n  componentDidMount(){\n    const { msg, auth  } = this.props;\n    if(!auth){\n      msg.show(\"请先登录\")\n    }\n  }\n  render(){\n    const { auth, exact, path, component  } = this.props;\n    if(auth){\n      return <Route auth={auth} exact={exact} path={path} component={component} />\n    }else{\n      return <Redirect to=\"/login\"/>\n    }\n    \n  }\n \n}\n\n@inject('msg')\n@inject('currentUser')\n@inject('app')\n@observer\nclass App extends Component<IAppProps, IAppState> {\n\n  private timer:any;\n\n  constructor(props: any){\n    super(props);\n \n  }\n  \n  componentDidMount(){\n    const { app, currentUser } = this.props;\n    app.getAppInfo();\n    \n  }\n\n\n\n  componentWillUpdate(){\n    const {  currentUser } = this.props;\n    clearInterval(this.timer);\n    if(currentUser.isLogined ){\n      this.timer = setInterval(()=>{\n        currentUser.checkLogined();\n      }, 1500);\n    }\n    if(!currentUser.isLogined ){\n      clearInterval(this.timer);\n    }\n   \n  }\n\n  render() {\n    const { currentUser, msg, app } = this.props;\n    \n    let auth = false;\n    if(currentUser.isLogined){\n      //auth要在此重新定义，这样render才能重新渲染，这样PrivateRoute才能执行\n      auth =true;\n    }\n    \n    if(app.loading){\n      return <LoadApp />\n    }\n    \n    return (\n      <div style={{height:\"100%\"}}>\n        <Router>\n            <Switch>\n              <Route exact path=\"/\" component={Home} />\n              <PrivateRoute msg={msg} auth={auth} exact path=\"/dashboard\" component={Dashboard} />\n              <PrivateRoute msg={msg} auth={auth} exact path=\"/dashboard/users\" component={UserAdmin} />\n              <PrivateRoute msg={msg} auth={auth} exact path=\"/dashboard/banner\" component={HomeBanner} />\n              <PrivateRoute msg={msg} auth={auth} exact path=\"/dashboard/settings\" component={SettingPage} />\n              <Route exact path=\"/register\" component={Register} />\n              <PrivateRoute msg={msg} auth={auth} exact path=\"/personal\" component={Personal} />\n              <Route exact path=\"/login\" component={login} />\n              <Route  component={NotFound} />\n            </Switch>\n        </Router>\n        \n      </div>\n    );\n  }\n}\n\nexport default App as any;\n"]},"metadata":{},"sourceType":"module"}