{"ast":null,"code":"import _initializerDefineProperty from \"/Users/zhoushixiong/zsx_work/FangAllOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _classCallCheck from \"/Users/zhoushixiong/zsx_work/FangAllOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zhoushixiong/zsx_work/FangAllOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _applyDecoratedDescriptor from \"/Users/zhoushixiong/zsx_work/FangAllOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"/Users/zhoushixiong/zsx_work/FangAllOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _class, _descriptor, _descriptor2, _descriptor3, _descriptor4;\n\nimport { UPDATE, SHOW } from './../../constants/API';\nimport { observable, action } from \"mobx\";\nimport { api } from '../../api';\nexport var App = (_class =\n/*#__PURE__*/\nfunction () {\n  function App() {\n    _classCallCheck(this, App);\n\n    _initializerDefineProperty(this, \"loading\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"appId\", _descriptor2, this);\n\n    _initializerDefineProperty(this, \"name\", _descriptor3, this);\n\n    _initializerDefineProperty(this, \"updating\", _descriptor4, this);\n  }\n\n  _createClass(App, [{\n    key: \"getAppInfo\",\n    value: function getAppInfo() {\n      var _this = this;\n\n      this.loading = true;\n      return api('apps', SHOW, {\n        host: window.location.host\n      }, {\n        fields: [\"appId\", \"name\"]\n      }).then(function (rlt) {\n        _this.loading = false;\n        _this.name = rlt.data.name;\n        window.document.title = _this.name;\n        _this.appId = rlt.data.uuid;\n      });\n    }\n  }, {\n    key: \"getAppSetting\",\n    value: function getAppSetting() {\n      return api('apps', SHOW, {\n        appId: this.appId\n      }, {\n        fields: [\"Setting\"]\n      }).then(function (rlt) {\n        console.log(rlt);\n      });\n    }\n  }, {\n    key: \"changeName\",\n    value: function changeName(value) {\n      this.name = value;\n    }\n  }, {\n    key: \"updateAppName\",\n    value: function updateAppName() {\n      var _this2 = this;\n\n      var cb = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n      this.updating = true;\n\n      if (this.name === '') {\n        this.getAppInfo();\n        return cb('应用名不能为空');\n      }\n\n      return api('apps', UPDATE, {\n        appId: this.appId\n      }, {\n        name: this.name\n      }).then(function (rlt) {\n        _this2.name = rlt.data.name;\n        _this2.updating = false;\n        cb(\"修改应用名成功\");\n      }).catch(function (err) {\n        _this2.updating = false;\n        cb(\"修改应用名失败\");\n      });\n    }\n  }]);\n\n  return App;\n}(), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"loading\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return true;\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"appId\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"name\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return \"\";\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"updating\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"getAppInfo\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"getAppInfo\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"getAppSetting\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"getAppSetting\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"changeName\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"changeName\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"updateAppName\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"updateAppName\"), _class.prototype)), _class);\nvar app = new App();\nexport default app;","map":{"version":3,"sources":["/Users/zhoushixiong/zsx_work/FangAllOne/src/mobx/global/App.ts"],"names":["UPDATE","SHOW","observable","action","api","App","loading","host","window","location","fields","then","rlt","name","data","document","title","appId","uuid","console","log","value","cb","updating","getAppInfo","catch","err","app"],"mappings":";;;;;;;;AAAA,SAASA,MAAT,EAAiBC,IAAjB,QAA6B,uBAA7B;AACA,SAASC,UAAT,EAAqBC,MAArB,QAAmC,MAAnC;AACA,SAASC,GAAT,QAAoB,WAApB;AAEA,WAAaC,GAAb;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,iCAOwB;AAAA;;AAChB,WAAKC,OAAL,GAAe,IAAf;AACA,aAAOF,GAAG,CAAC,MAAD,EAASH,IAAT,EAAe;AAACM,QAAAA,IAAI,EAAEC,MAAM,CAACC,QAAP,CAAgBF;AAAvB,OAAf,EAA6C;AACnDG,QAAAA,MAAM,EAAE,CAAC,OAAD,EAAU,MAAV;AAD2C,OAA7C,CAAH,CAEJC,IAFI,CAEC,UAACC,GAAD,EAAW;AACf,QAAA,KAAI,CAACN,OAAL,GAAe,KAAf;AACA,QAAA,KAAI,CAACO,IAAL,GAAYD,GAAG,CAACE,IAAJ,CAASD,IAArB;AACAL,QAAAA,MAAM,CAACO,QAAP,CAAgBC,KAAhB,GAAwB,KAAI,CAACH,IAA7B;AACA,QAAA,KAAI,CAACI,KAAL,GAAaL,GAAG,CAACE,IAAJ,CAASI,IAAtB;AACH,OAPM,CAAP;AASH;AAlBL;AAAA;AAAA,oCAoB2B;AACnB,aAAOd,GAAG,CAAC,MAAD,EAASH,IAAT,EAAe;AAACgB,QAAAA,KAAK,EAAE,KAAKA;AAAb,OAAf,EAAoC;AAC1CP,QAAAA,MAAM,EAAE,CAAC,SAAD;AADkC,OAApC,CAAH,CAGJC,IAHI,CAGC,UAAAC,GAAG,EAAE;AACTO,QAAAA,OAAO,CAACC,GAAR,CAAYR,GAAZ;AAEH,OANM,CAAP;AAOH;AA5BL;AAAA;AAAA,+BA8BuBS,KA9BvB,EA8BoC;AAC5B,WAAKR,IAAL,GAAYQ,KAAZ;AACH;AAhCL;AAAA;AAAA,oCAkC6C;AAAA;;AAAA,UAAnBC,EAAmB,uEAAP,YAAI,CAAE,CAAC;AACrC,WAAKC,QAAL,GAAgB,IAAhB;;AACA,UAAG,KAAKV,IAAL,KAAc,EAAjB,EAAoB;AAChB,aAAKW,UAAL;AACA,eAAOF,EAAE,CAAC,SAAD,CAAT;AACH;;AACD,aAAOlB,GAAG,CAAC,MAAD,EAASJ,MAAT,EACT;AAACiB,QAAAA,KAAK,EAAE,KAAKA;AAAb,OADS,EAET;AAACJ,QAAAA,IAAI,EAAE,KAAKA;AAAZ,OAFS,CAAH,CAGJF,IAHI,CAGC,UAACC,GAAD,EAAW;AACf,QAAA,MAAI,CAACC,IAAL,GAAWD,GAAG,CAACE,IAAJ,CAASD,IAApB;AACA,QAAA,MAAI,CAACU,QAAL,GAAgB,KAAhB;AACAD,QAAAA,EAAE,CAAC,SAAD,CAAF;AAGH,OATM,EASJG,KATI,CASE,UAACC,GAAD,EAAW;AAChB,QAAA,MAAI,CAACH,QAAL,GAAgB,KAAhB;AACAD,QAAAA,EAAE,CAAC,SAAD,CAAF;AACH,OAZM,CAAP;AAaH;AArDL;;AAAA;AAAA,4EACKpB,UADL;AAAA;AAAA;AAAA;AAAA;AAAA,WACwB,IADxB;AAAA;AAAA,yEAEKA,UAFL;AAAA;AAAA;AAAA;AAAA;AAAA,WAEsB,EAFtB;AAAA;AAAA,wEAGKA,UAHL;AAAA;AAAA;AAAA;AAAA;AAAA,WAGqB,EAHrB;AAAA;AAAA,4EAKKA,UALL;AAAA;AAAA;AAAA;AAAA;AAAA,WAK2B,KAL3B;AAAA;AAAA,+DAOKC,MAPL,qJAoBKA,MApBL,qJA8BKA,MA9BL,qJAkCKA,MAlCL;AA0DA,IAAMwB,GAAG,GAAG,IAAItB,GAAJ,EAAZ;AAGA,eAAesB,GAAf","sourcesContent":["import { UPDATE, SHOW } from './../../constants/API';\nimport { observable, action } from \"mobx\";\nimport { api } from '../../api';\n\nexport class App {\n    @observable loading=true;\n    @observable appId='';\n    @observable name=\"\";\n\n    @observable updating = false;\n\n    @action getAppInfo(){\n        this.loading = true;\n        return api('apps', SHOW, {host: window.location.host}, {\n            fields: [\"appId\", \"name\"]\n        }).then((rlt:any)=>{\n            this.loading = false;\n            this.name = rlt.data.name;\n            window.document.title = this.name; \n            this.appId = rlt.data.uuid;    \n        });\n        \n    }\n\n    @action getAppSetting(){\n        return api('apps', SHOW, {appId: this.appId}, {\n            fields: [\"Setting\"],\n            \n        }).then(rlt=>{\n            console.log(rlt);\n            \n        })\n    }\n\n    @action changeName(value:string){\n        this.name = value;\n    }\n\n    @action updateAppName(cb:Function=()=>{}){\n        this.updating = true;\n        if(this.name === ''){\n            this.getAppInfo();\n            return cb('应用名不能为空');\n        }\n        return api('apps', UPDATE,\n         {appId: this.appId}, \n         {name: this.name}\n         ).then((rlt:any)=>{\n            this.name= rlt.data.name;\n            this.updating = false;\n            cb(\"修改应用名成功\");\n\n            \n        }).catch((err:any)=>{\n            this.updating = false;\n            cb(\"修改应用名失败\");\n        })\n    }\n\n \n}\n\nconst app = new App();\n\n\nexport default app;"]},"metadata":{},"sourceType":"module"}